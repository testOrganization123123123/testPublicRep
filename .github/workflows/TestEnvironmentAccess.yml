name: Test Environment Access

on:
  push:
    branches:
      - dev
      - test
      - uat
      - master
  workflow_dispatch:  # Allows manual triggering

jobs:
  test-access:
    runs-on: ubuntu-latest
    environment: testEnviromet

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Load Environment Secret
        env:
          CREDENTIAL: ${{ secrets.CREDENTIAL }}
        run: |
          if [ -z "$CREDENTIAL" ]; then
            echo "‚ùå Secret CREDENTIAL is not available!"
            exit 1
          fi
          echo "‚úÖ Secret CREDENTIAL is set."

      - name: Test Access to ${{ matrix.environment }}
        env:
          CREDENTIAL: ${{ secrets.CREDENTIAL }}
        run: |
          echo "üîç Testing access to ${{ matrix.environment }}..."
